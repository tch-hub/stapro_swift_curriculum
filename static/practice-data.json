{
    "practiceProblems": [
        {
            "id": "variable-declaration",
            "title": "変数の宣言練習",
            "description": "適切なキーワードを使って変数を宣言してみよう",
            "difficulty": "初級",
            "category": "変数",
            "icon": "code",
            "estimatedTime": "10分",
            "completed": false,
            "steps": [
                {
                    "id": 1,
                    "title": "問題1: let vs var",
                    "instruction": "値が変更されない場合、どちらのキーワードを使うべきですか？\n\n例: ユーザーの名前を保存する変数",
                    "hint": "値が変更されない場合は不変性を保つキーワードを選びましょう。",
                    "options": [
                        "var",
                        "let",
                        "const",
                        "final"
                    ],
                    "correctAnswer": 1,
                    "explanation": "値が変更されない場合は `let` を使用します。不変性を保つことでより安全なコードになります。"
                },
                {
                    "id": 2,
                    "title": "問題2: 変数名の規則",
                    "instruction": "Swiftの変数名として正しいものはどれですか？",
                    "hint": "Swiftの変数名は文字、数字、アンダースコアを使用でき、数字で始まることはできません。",
                    "options": [
                        "123count",
                        "user_name",
                        "class",
                        "userName"
                    ],
                    "correctAnswer": 3,
                    "explanation": "`userName` がSwiftの命名規則（キャメルケース）に従った正しい変数名です。`class` は予約語なので使用できません。"
                },
                {
                    "id": 3,
                    "title": "問題3: 値の変更",
                    "instruction": "次のコードで何が起こりますか？\n\nlet score = 100\nscore = 200",
                    "hint": "`let` で宣言された変数の特性を考えてください。",
                    "options": [
                        "正常に実行される",
                        "コンパイルエラーが発生",
                        "実行時エラーが発生",
                        "警告が表示される"
                    ],
                    "correctAnswer": 1,
                    "explanation": "`let` で宣言された変数は不変なので、値を変更しようとするとコンパイルエラーが発生します。"
                },
                {
                    "id": 4,
                    "title": "コーディング課題: 変数宣言の実践",
                    "type": "coding",
                    "instruction": "以下の要件に従ってSwiftコードを書いてください：\n\n1. 変更可能な整数変数 `age` を宣言し、25で初期化してください\n2. 不変の文字列変数 `name` を宣言し、\"太郎\"で初期化してください\n3. `age` を30に変更してください\n4. `name` と `age` を使って \"太郎は30歳です\" という文字列を作成し、`message` 変数に格納してください\n5. `message` をコンソールに出力してください",
                    "hint": "変更可能な変数には `var`、不変の変数には `let` を使用します。文字列補間には \\(変数名) を使用します。",
                    "sampleAnswer": "var age = 25\nlet name = \"太郎\"\nage = 30\nlet message = \"\\(name)は\\(age)歳です\"\nprint(message)",
                    "expectedOutput": "太郎は30歳です",
                    "explanation": "このコードでは、変更可能な変数 `var age`、不変の変数 `let name` を適切に使い分けています。文字列補間 \\(name) と \\(age) を使用して文字列を作成し、print文で出力しています。"
                }
            ]
        },
        {
            "id": "type-inference",
            "title": "型推論チャレンジ",
            "description": "Swiftの型推論システムを理解して、適切なコードを選択しよう",
            "difficulty": "中級",
            "category": "データ型",
            "icon": "psychology",
            "estimatedTime": "15分",
            "completed": false,
            "steps": [
                {
                    "id": 1,
                    "title": "問題1: 基本的な型推論",
                    "instruction": "次のコードで、変数 'message' の型は何になりますか？\n\nvar message = \"Hello, Swift!\"",
                    "hint": "Swiftは値から自動的に型を推論します。文字列リテラルから推論される型を考えてください。",
                    "options": [
                        "String",
                        "Int",
                        "Double",
                        "Any"
                    ],
                    "correctAnswer": 0,
                    "explanation": "文字列リテラル \"Hello, Swift!\" から、Swiftは自動的に String 型と推論します。"
                },
                {
                    "id": 2,
                    "title": "問題2: 数値の型推論",
                    "instruction": "次のコードで、変数 'count' の型は何になりますか？\n\nvar count = 42",
                    "hint": "整数リテラルの場合、Swiftはどの整数型を選択するでしょうか？",
                    "options": [
                        "Int8",
                        "Int16",
                        "Int",
                        "Double"
                    ],
                    "correctAnswer": 2,
                    "explanation": "整数リテラルの場合、Swiftは標準的に Int 型を推論します。"
                },
                {
                    "id": 3,
                    "title": "問題3: 小数点数の型推論",
                    "instruction": "次のコードで、変数 'price' の型は何になりますか？\n\nvar price = 99.99",
                    "hint": "小数点を含む数値リテラルから推論される型を考えてください。",
                    "options": [
                        "Float",
                        "Double",
                        "Int",
                        "Decimal"
                    ],
                    "correctAnswer": 1,
                    "explanation": "小数点を含む数値リテラルの場合、Swiftは自動的に Double 型を推論します。"
                },
                {
                    "id": 4,
                    "title": "問題4: 配列の型推論",
                    "instruction": "次のコードで、変数 'numbers' の型は何になりますか？\n\nvar numbers = [1, 2, 3, 4, 5]",
                    "hint": "配列リテラルの要素から推論される型を考えてください。",
                    "options": [
                        "[Any]",
                        "[Int]",
                        "Array",
                        "[Double]"
                    ],
                    "correctAnswer": 1,
                    "explanation": "整数要素を持つ配列リテラルから、Swiftは [Int] 型（Int型の配列）を推論します。"
                },
                {
                    "id": 5,
                    "title": "問題5: 辞書の型推論",
                    "instruction": "次のコードで、変数 'scores' の型は何になりますか？\n\nvar scores = [\"Alice\": 95, \"Bob\": 87]",
                    "hint": "辞書リテラルのキーと値の型から推論される型を考えてください。",
                    "options": [
                        "[String: Any]",
                        "[Any: Int]",
                        "[String: Int]",
                        "Dictionary"
                    ],
                    "correctAnswer": 2,
                    "explanation": "文字列キーと整数値を持つ辞書リテラルから、Swiftは [String: Int] 型を推論します。"
                },
                {
                    "id": 6,
                    "title": "問題6: ブール値の型推論",
                    "instruction": "次のコードで、変数 'isActive' の型は何になりますか？\n\nvar isActive = true",
                    "hint": "ブール値リテラルから推論される型を考えてください。",
                    "options": [
                        "Int",
                        "String",
                        "Bool",
                        "Any"
                    ],
                    "correctAnswer": 2,
                    "explanation": "ブール値リテラル true から、Swiftは Bool 型を推論します。"
                },
                {
                    "id": 7,
                    "title": "問題7: 複雑な型推論",
                    "instruction": "次のコードで、変数 'result' の型は何になりますか？\n\nvar result = 10 + 3.5",
                    "hint": "異なる数値型の演算結果について考えてください。",
                    "options": [
                        "Int",
                        "Float",
                        "Double",
                        "String"
                    ],
                    "correctAnswer": 2,
                    "explanation": "Int と Double の演算では、より精度の高い Double 型に統一されるため、result は Double 型になります。"
                },
                {
                    "id": 8,
                    "title": "問題8: 型注釈との比較",
                    "instruction": "型推論を使わずに明示的に型を指定する場合、正しいコードはどれですか？\n\n元のコード: var name = \"Swift\"",
                    "hint": "型注釈（Type Annotation）を使用して型を明示的に指定してください。",
                    "options": [
                        "var name: String = \"Swift\"",
                        "var name = String(\"Swift\")",
                        "var name as String = \"Swift\"",
                        "var name -> String = \"Swift\""
                    ],
                    "correctAnswer": 0,
                    "explanation": "型注釈を使用する場合は、変数名の後にコロン（:）と型名を記述します。var name: String = \"Swift\" が正しい書き方です。"
                },
                {
                    "id": 9,
                    "title": "コーディング課題: 型推論と型注釈の実践",
                    "type": "coding",
                    "instruction": "以下の要件に従ってSwiftコードを書いてください：\n\n1. 型推論を使って整数変数 `score` を100で初期化してください\n2. 型推論を使って小数変数 `average` を85.5で初期化してください\n3. 型注釈を使って文字列変数 `grade` を宣言し、\"A\"で初期化してください\n4. 型注釈を使ってブール変数 `passed` を宣言し、trueで初期化してください\n5. 各変数の型を確認するため、type(of:) 関数を使って型を出力してください",
                    "hint": "型推論では型を省略し、型注釈では変数名: 型名 = 値 の形式で書きます。type(of: 変数) で型を確認できます。",
                    "sampleAnswer": "let score = 100\nlet average = 85.5\nlet grade: String = \"A\"\nlet passed: Bool = true\nprint(type(of: score))\nprint(type(of: average))\nprint(type(of: grade))\nprint(type(of: passed))",
                    "expectedOutput": "Int\nDouble\nString\nBool",
                    "explanation": "型推論により `score` は Int型、`average` は Double型と自動的に推論されます。型注釈を使って `grade` をString型、`passed` をBool型として明示的に宣言しています。type(of:) 関数で各変数の型を確認できます。"
                }
            ]
        },
        {
            "id": "conditional-statements",
            "title": "条件分岐の実装",
            "description": "if文を使って条件による処理分岐を作ってみよう",
            "difficulty": "中級",
            "category": "制御構造",
            "icon": "account_tree",
            "estimatedTime": "12分",
            "completed": false,
            "steps": [
                {
                    "id": 1,
                    "title": "問題1: 基本的なif文",
                    "instruction": "次のコードの実行結果は何ですか？\n\nlet age = 20\nif age >= 18 {\n    print(\"成人です\")\n} else {\n    print(\"未成年です\")\n}",
                    "hint": "age の値と条件を比較してください。",
                    "options": [
                        "成人です",
                        "未成年です",
                        "エラーが発生",
                        "何も出力されない"
                    ],
                    "correctAnswer": 0,
                    "explanation": "age が 20 で、18 以上なので条件が true となり、「成人です」が出力されます。"
                },
                {
                    "id": 2,
                    "title": "問題2: else if文",
                    "instruction": "成績判定プログラムで、score が 85 の場合の出力は？\n\nlet score = 85\nif score >= 90 {\n    print(\"優\")\n} else if score >= 80 {\n    print(\"良\")\n} else if score >= 70 {\n    print(\"可\")\n} else {\n    print(\"不可\")\n}",
                    "hint": "上から順番に条件をチェックします。",
                    "options": [
                        "優",
                        "良",
                        "可",
                        "不可"
                    ],
                    "correctAnswer": 1,
                    "explanation": "score が 85 なので、最初の条件（90以上）は false、2番目の条件（80以上）が true となり、「良」が出力されます。"
                },
                {
                    "id": 3,
                    "title": "問題3: 論理演算子",
                    "instruction": "次の条件式の結果は？\n\nlet temperature = 25\nlet humidity = 60\nif temperature > 20 && humidity < 70 {\n    print(\"快適です\")\n} else {\n    print(\"不快です\")\n}",
                    "hint": "&& は AND演算子です。両方の条件が true の場合に全体が true になります。",
                    "options": [
                        "快適です",
                        "不快です",
                        "エラーが発生",
                        "条件が不正"
                    ],
                    "correctAnswer": 0,
                    "explanation": "temperature > 20 が true（25 > 20）、humidity < 70 も true（60 < 70）なので、&& の結果は true となり「快適です」が出力されます。"
                },
                {
                    "id": 4,
                    "title": "コーディング課題: 条件分岐の実装",
                    "type": "coding",
                    "instruction": "以下の要件に従って天気判定プログラムを作成してください：\n\n1. 整数変数 `temperature` を22で初期化してください\n2. 整数変数 `humidity` を65で初期化してください\n3. 以下の条件で判定してください：\n   - 気温が20度以上30度未満かつ湿度が70%未満の場合：\"快適な天気です\"\n   - 気温が30度以上の場合：\"暑い日です\"\n   - 湿度が70%以上の場合：\"湿度が高いです\"\n   - その他の場合：\"肌寒い天気です\"\n4. 判定結果をコンソールに出力してください",
                    "hint": "複数の条件を組み合わせる場合は && (AND) や || (OR) を使用します。条件の優先順位に注意してください。",
                    "sampleAnswer": "let temperature = 22\nlet humidity = 65\n\nif temperature >= 20 && temperature < 30 && humidity < 70 {\n    print(\"快適な天気です\")\n} else if temperature >= 30 {\n    print(\"暑い日です\")\n} else if humidity >= 70 {\n    print(\"湿度が高いです\")\n} else {\n    print(\"肌寒い天気です\")\n}",
                    "expectedOutput": "快適な天気です",
                    "explanation": "temperature = 22（20以上30未満）、humidity = 65（70未満）なので、最初の条件 `temperature >= 20 && temperature < 30 && humidity < 70` が true となり、\"快適な天気です\" が出力されます。"
                }
            ]
        },
        {
            "id": "array-operations",
            "title": "配列の操作",
            "description": "配列の要素を追加・削除・検索してみよう",
            "difficulty": "中級",
            "category": "コレクション",
            "icon": "view_list",
            "estimatedTime": "15分",
            "completed": false,
            "steps": [
                {
                    "id": 1,
                    "title": "問題1: 配列の作成",
                    "instruction": "空の整数配列を作成する正しい方法はどれですか？",
                    "hint": "Swiftでは型を明示して空の配列を作成する方法があります。",
                    "options": [
                        "var numbers = []",
                        "var numbers: [Int] = []",
                        "var numbers = Array()",
                        "var numbers = [Int]"
                    ],
                    "correctAnswer": 1,
                    "explanation": "型注釈を使って var numbers: [Int] = [] が正しい空の配列の作成方法です。"
                },
                {
                    "id": 2,
                    "title": "問題2: 要素の追加",
                    "instruction": "配列に要素を追加するメソッドはどれですか？\n\nvar fruits = [\"apple\", \"banana\"]\n// ここで \"orange\" を追加したい",
                    "hint": "配列の末尾に要素を追加するメソッドを考えてください。",
                    "options": [
                        "fruits.add(\"orange\")",
                        "fruits.append(\"orange\")",
                        "fruits.insert(\"orange\")",
                        "fruits.push(\"orange\")"
                    ],
                    "correctAnswer": 1,
                    "explanation": "Swiftでは `append()` メソッドを使って配列の末尾に要素を追加します。"
                },
                {
                    "id": 3,
                    "title": "問題3: 配列の要素数",
                    "instruction": "配列の要素数を取得するプロパティはどれですか？\n\nlet colors = [\"red\", \"green\", \"blue\"]",
                    "hint": "配列のサイズを表すプロパティを考えてください。",
                    "options": [
                        "colors.size",
                        "colors.length",
                        "colors.count",
                        "colors.total"
                    ],
                    "correctAnswer": 2,
                    "explanation": "Swiftでは `count` プロパティを使って配列の要素数を取得します。"
                },
                {
                    "id": 4,
                    "title": "コーディング課題: 配列操作の実践",
                    "type": "coding",
                    "instruction": "以下の要件に従って買い物リストアプリを作成してください：\n\n1. 空の文字列配列 `shoppingList` を作成してください\n2. \"りんご\"、\"バナナ\"、\"オレンジ\" を順番に配列に追加してください\n3. 配列の最初に \"牛乳\" を挿入してください（insert メソッドを使用）\n4. 配列の要素数を出力してください\n5. 配列の全ての要素を順番に出力してください（for-in ループを使用）\n6. \"バナナ\" を配列から削除してください（firstIndex と remove メソッドを使用）\n7. 削除後の配列を再度出力してください",
                    "hint": "insert(_, at:) で指定位置に挿入、firstIndex(of:) で要素のインデックスを取得、remove(at:) で削除できます。",
                    "sampleAnswer": "var shoppingList: [String] = []\nshoppingList.append(\"りんご\")\nshoppingList.append(\"バナナ\")\nshoppingList.append(\"オレンジ\")\nshoppingList.insert(\"牛乳\", at: 0)\nprint(shoppingList.count)\nfor item in shoppingList {\n    print(item)\n}\nif let index = shoppingList.firstIndex(of: \"バナナ\") {\n    shoppingList.remove(at: index)\n}\nfor item in shoppingList {\n    print(item)\n}",
                    "expectedOutput": "4\n牛乳\nりんご\nバナナ\nオレンジ\n牛乳\nりんご\nオレンジ",
                    "explanation": "配列の基本操作（追加、挿入、削除、要素数取得、要素アクセス）を実践しています。insert で先頭に挿入、firstIndex で要素を検索してから remove で削除しています。"
                }
            ]
        },
        {
            "id": "function-creation",
            "title": "関数の作成",
            "description": "引数と戻り値を持つ関数を作ってみよう",
            "difficulty": "上級",
            "category": "関数",
            "icon": "functions",
            "estimatedTime": "18分",
            "completed": false,
            "steps": [
                {
                    "id": 1,
                    "title": "問題1: 基本的な関数",
                    "instruction": "2つの整数を受け取って合計を返す関数の正しい定義はどれですか？",
                    "hint": "func キーワードを使用し、引数の型と戻り値の型を指定します。",
                    "options": [
                        "func add(a: Int, b: Int) -> Int { return a + b }",
                        "function add(a: Int, b: Int) -> Int { return a + b }",
                        "def add(a: Int, b: Int) -> Int { return a + b }",
                        "func add(Int a, Int b) -> Int { return a + b }"
                    ],
                    "correctAnswer": 0,
                    "explanation": "Swiftでは `func` キーワードを使い、`func 関数名(引数名: 型) -> 戻り値の型` の形式で関数を定義します。"
                },
                {
                    "id": 2,
                    "title": "問題2: 引数ラベル",
                    "instruction": "次の関数呼び出しで正しいものはどれですか？\n\nfunc greet(to name: String) -> String {\n    return \"Hello, \\(name)!\"\n}",
                    "hint": "引数ラベル 'to' と引数名 'name' に注目してください。",
                    "options": [
                        "greet(name: \"Swift\")",
                        "greet(to: \"Swift\")",
                        "greet(\"Swift\")",
                        "greet(to name: \"Swift\")"
                    ],
                    "correctAnswer": 1,
                    "explanation": "引数ラベルが 'to' なので、関数呼び出し時は `greet(to: \"Swift\")` となります。"
                },
                {
                    "id": 3,
                    "title": "問題3: デフォルト引数",
                    "instruction": "次の関数で `multiply(5)` を呼び出した場合の結果は？\n\nfunc multiply(_ number: Int, by factor: Int = 2) -> Int {\n    return number * factor\n}",
                    "hint": "デフォルト引数の値に注目してください。",
                    "options": [
                        "5",
                        "10",
                        "エラーが発生",
                        "0"
                    ],
                    "correctAnswer": 1,
                    "explanation": "by パラメータのデフォルト値は 2 なので、5 * 2 = 10 が返されます。"
                },
                {
                    "id": 4,
                    "title": "コーディング課題: 関数作成の実践",
                    "type": "coding",
                    "instruction": "以下の要件に従って計算機能を持つ関数を作成してください：\n\n1. 2つの整数を受け取り、その合計を返す関数 `add` を作成してください\n2. 3つの整数を受け取り、その平均値（Double型）を返す関数 `average` を作成してください\n3. 文字列と回数を受け取り、その文字列を指定回数繰り返した文字列を返す関数 `repeat` を作成してください（引数ラベルは `string` と `times` を使用）\n4. 各関数をテストするためのコードを書いてください：\n   - add(10, 20) の結果を出力\n   - average(10, 20, 30) の結果を出力\n   - repeat(string: \"Hello\", times: 3) の結果を出力",
                    "hint": "引数ラベルは `func 関数名(ラベル 引数名: 型)` の形式で指定します。型変換には Double() を使用できます。",
                    "sampleAnswer": "func add(_ a: Int, _ b: Int) -> Int {\n    return a + b\n}\n\nfunc average(_ a: Int, _ b: Int, _ c: Int) -> Double {\n    return Double(a + b + c) / 3.0\n}\n\nfunc repeat(string text: String, times count: Int) -> String {\n    var result = \"\"\n    for _ in 0..<count {\n        result += text\n    }\n    return result\n}\n\nprint(add(10, 20))\nprint(average(10, 20, 30))\nprint(repeat(string: \"Hello\", times: 3))",
                    "expectedOutput": "30\n20.0\nHelloHelloHello",
                    "explanation": "add関数は単純な加算、average関数は整数を Double に変換して平均値を計算、repeat関数は for-in ループを使って文字列を繰り返しています。引数ラベルにより関数呼び出し時の可読性が向上しています。"
                }
            ]
        },
        {
            "id": "optional-types",
            "title": "オプショナル型の使用",
            "description": "オプショナル型を使った安全なコードを書いてみよう",
            "difficulty": "上級",
            "category": "オプショナル",
            "icon": "help",
            "estimatedTime": "20分",
            "completed": false,
            "steps": [
                {
                    "id": 1,
                    "title": "問題1: オプショナル型の宣言",
                    "instruction": "nil を代入できる文字列変数を宣言する正しい方法はどれですか？",
                    "hint": "オプショナル型を表す記号を考えてください。",
                    "options": [
                        "var name: String = nil",
                        "var name: String? = nil",
                        "var name: String! = nil",
                        "var name: Optional<String> = nil"
                    ],
                    "correctAnswer": 1,
                    "explanation": "オプショナル型は型名の後に `?` を付けて宣言します。`String?` が正しい書き方です。"
                },
                {
                    "id": 2,
                    "title": "問題2: オプショナルバインディング",
                    "instruction": "オプショナル値を安全に取り出す if let 文の正しい使い方はどれですか？\n\nlet optionalName: String? = \"Swift\"",
                    "hint": "if let を使ってオプショナル値を安全に取り出します。",
                    "options": [
                        "if let name = optionalName { print(name) }",
                        "if optionalName != nil { print(optionalName) }",
                        "if let optionalName { print(optionalName) }",
                        "let name = optionalName ?? \"default\""
                    ],
                    "correctAnswer": 0,
                    "explanation": "`if let name = optionalName` でオプショナル値を安全に取り出し、nilでない場合のみ処理を実行できます。"
                },
                {
                    "id": 3,
                    "title": "問題3: Nil合体演算子",
                    "instruction": "次のコードの結果は何ですか？\n\nlet optionalAge: Int? = nil\nlet age = optionalAge ?? 18\nprint(age)",
                    "hint": "?? 演算子（nil合体演算子）の動作を考えてください。",
                    "options": [
                        "nil",
                        "18",
                        "エラーが発生",
                        "0"
                    ],
                    "correctAnswer": 1,
                    "explanation": "optionalAge が nil なので、?? 演算子により右側の値 18 が使用されます。"
                },
                {
                    "id": 4,
                    "title": "コーディング課題: オプショナル型の実践",
                    "type": "coding",
                    "instruction": "以下の要件に従ってユーザー情報管理システムを作成してください：\n\n1. オプショナル文字列変数 `optionalName` を宣言し、\"山田太郎\" で初期化してください\n2. オプショナル整数変数 `optionalAge` を宣言し、nil で初期化してください\n3. if let を使って `optionalName` を安全に取り出し、値がある場合は \"名前: [名前]\" を出力してください\n4. guard let を使って `optionalAge` を安全に取り出そうとし、値がない場合は \"年齢が設定されていません\" を出力して処理を終了してください\n5. nil合体演算子を使って、`optionalAge` が nil の場合は 20 をデフォルト値として使用し、\"年齢: [年齢]\" を出力してください\n6. `optionalAge` に 25 を代入してから、再度 guard let で安全に取り出して \"更新された年齢: [年齢]\" を出力してください",
                    "hint": "if let は値がある場合のみ処理、guard let は値がない場合に早期リターン、?? は nil の場合のデフォルト値を指定します。",
                    "sampleAnswer": "var optionalName: String? = \"山田太郎\"\nvar optionalAge: Int? = nil\n\nif let name = optionalName {\n    print(\"名前: \\(name)\")\n}\n\nfunc checkAge() {\n    guard let age = optionalAge else {\n        print(\"年齢が設定されていません\")\n        return\n    }\n    print(\"年齢: \\(age)\")\n}\n\ncheckAge()\n\nlet defaultAge = optionalAge ?? 20\nprint(\"年齢: \\(defaultAge)\")\n\noptionalAge = 25\nif let updatedAge = optionalAge {\n    print(\"更新された年齢: \\(updatedAge)\")\n}",
                    "expectedOutput": "名前: 山田太郎\n年齢が設定されていません\n年齢: 20\n更新された年齢: 25",
                    "explanation": "オプショナル値の安全な取り扱い方法を実践しています。if let でオプショナル値を安全に取り出し、guard let で早期リターン、nil合体演算子でデフォルト値を提供しています。"
                }
            ]
        }
    ]
}