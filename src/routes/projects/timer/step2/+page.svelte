<script>
  import { base } from "$app/paths";
  import CodeBlock from "$lib/CodeBlock.svelte";

  // ã‚¹ãƒ†ãƒƒãƒ—æƒ…å ±
  const stepInfo = {
    number: 2,
    title: "ã‚¿ã‚¤ãƒãƒ¼ã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹Enum",
    description: "ã‚¿ã‚¤ãƒãƒ¼ã®3ã¤ã®çŠ¶æ…‹ï¼ˆå¾…æ©Ÿã€å®Ÿè¡Œä¸­ã€ä¸€æ™‚åœæ­¢ï¼‰ã‚’å®šç¾©ã—ã‚ˆã†",
    duration: "15åˆ†",
    difficulty: "åˆç´š",
    icon: "category",
  };

  // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±
  const navigation = {
    prev: {
      title: "ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æº–å‚™",
      href: `${base}/projects/timer/step1`,
    },
    next: {
      title: "ã‚¹ãƒ†ãƒƒãƒ—3: æ™‚é–“è¨­å®šç”¨ã®Pickerä½œæˆ",
      href: `${base}/projects/timer/step3`,
    },
  };

  // å®Œå…¨ãªSwiftã‚³ãƒ¼ãƒ‰
  const fullSwiftCode = `import SwiftUI

// TimerStateã‚’å®šç¾©
enum TimerState {
    case idle      // å¾…æ©Ÿä¸­
    case running   // å®Ÿè¡Œä¸­
    case paused    // ä¸€æ™‚åœæ­¢ä¸­
}

struct ContentView: View {
    @State var timerState: TimerState = .idle
    
    var body: some View {
        VStack(spacing: 20) {
            Text("ã‚¿ã‚¤ãƒãƒ¼ã‚¢ãƒ—ãƒª")
                .font(.largeTitle)
                .fontWeight(.bold)
            
            Text("ç¾åœ¨ã®çŠ¶æ…‹: \(timerStateText)")
                .font(.title2)
                .foregroundColor(timerStateColor)
            
            Button("çŠ¶æ…‹ã‚’å¤‰æ›´") {
                changeTimerState()
            }
            .buttonStyle(.borderedProminent)
        }
        .padding()
    }
    
    // çŠ¶æ…‹ã«å¿œã˜ãŸãƒ†ã‚­ã‚¹ãƒˆã‚’è¿”ã™
    var timerStateText: String {
        switch timerState {
        case .idle:
            return "å¾…æ©Ÿä¸­"
        case .running:
            return "å®Ÿè¡Œä¸­"
        case .paused:
            return "ä¸€æ™‚åœæ­¢ä¸­"
        }
    }
    
    // çŠ¶æ…‹ã«å¿œã˜ãŸè‰²ã‚’è¿”ã™
    var timerStateColor: Color {
        switch timerState {
        case .idle:
            return .gray
        case .running:
            return .green
        case .paused:
            return .orange
        }
    }
    
    // çŠ¶æ…‹ã‚’é †ç•ªã«å¤‰æ›´ã™ã‚‹é–¢æ•°
    func changeTimerState() {
        switch timerState {
        case .idle:
            timerState = .running
        case .running:
            timerState = .paused
        case .paused:
            timerState = .idle
        }
    }
}`;
</script>

<svelte:head>
  <title>ã‚¹ãƒ†ãƒƒãƒ—2: ã‚¿ã‚¤ãƒãƒ¼ã®çŠ¶æ…‹ç®¡ç† - ã‚¿ã‚¤ãƒãƒ¼ã‚¢ãƒ—ãƒªä½œæˆ</title>
  <meta
    name="description"
    content="Swiftã§Enumã‚’ä½¿ã£ã¦ã‚¿ã‚¤ãƒãƒ¼ã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ã‚’å­¦ç¿’ã€‚å¾…æ©Ÿã€å®Ÿè¡Œä¸­ã€ä¸€æ™‚åœæ­¢ã®3ã¤ã®çŠ¶æ…‹ã‚’å®šç¾©ã€‚"
  />
</svelte:head>

<!-- ãƒ˜ãƒƒãƒ€ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
<section class="hero-section">
  <div class="grid">
    <div class="s12 center-align">
      <h1 class="primary-text">
        <i class="large">{stepInfo.icon}</i>
      </h1>
      <h2>ã‚¹ãƒ†ãƒƒãƒ— {stepInfo.number}: {stepInfo.title}</h2>
      <p class="large-text">{stepInfo.description}</p>
      <div class="space"></div>
      <div class="chip primary">
        <span>{stepInfo.difficulty}</span>
      </div>
      <div class="chip secondary">
        <span>æ‰€è¦æ™‚é–“: {stepInfo.duration}</span>
      </div>
    </div>
  </div>
</section>

<div class="space"></div>

<!-- å­¦ç¿’ç›®æ¨™ -->
<section>
  <div class="center-align">
    <h3>ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ç›®æ¨™</h3>
    <p class="medium-text">Enumã‚’ä½¿ã£ãŸçŠ¶æ…‹ç®¡ç†ã®åŸºæœ¬ã‚’ç†è§£ã—ã‚ˆã†</p>
  </div>

  <div class="space"></div>

  <div class="grid">
    <div class="s12 m4">
      <article class="round border padding">
        <div class="center-align">
          <i class="large primary-text">category</i>
          <h6>Enumã®ç†è§£</h6>
          <p class="small-text">é–¢é€£ã™ã‚‹å€¤ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã™ã‚‹Enumã®ä½¿ã„æ–¹</p>
        </div>
      </article>
    </div>

    <div class="s12 m4">
      <article class="round border padding">
        <div class="center-align">
          <i class="large secondary-text">track_changes</i>
          <h6>çŠ¶æ…‹ç®¡ç†</h6>
          <p class="small-text">ã‚¢ãƒ—ãƒªã®çŠ¶æ…‹ã‚’æ˜ç¢ºã«å®šç¾©ã—ã¦ç®¡ç†ã™ã‚‹æ–¹æ³•</p>
        </div>
      </article>
    </div>

    <div class="s12 m4">
      <article class="round border padding">
        <div class="center-align">
          <i class="large tertiary-text">alt_route</i>
          <h6>çŠ¶æ…‹é·ç§»</h6>
          <p class="small-text">çŠ¶æ…‹ãŒã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ã‚’ç†è§£ã™ã‚‹</p>
        </div>
      </article>
    </div>
  </div>
</section>

<div class="space"></div>

<!-- Enumã¨ã¯ -->
<section>
  <h3>ğŸ¤” Enumã£ã¦ä½•ï¼Ÿ</h3>

  <div class="space"></div>

  <div class="grid">
    <div class="s12 l6">
      <article class="card round">
        <div class="padding">
          <h5>JavaScriptã¨ã®æ¯”è¼ƒ</h5>
          <div class="space"></div>
          <h6 class="secondary-text">JavaScriptï¼ˆå®šæ•°ã‚’ä½¿ã£ãŸå ´åˆï¼‰</h6>
          <pre class="surface-container round padding"><code
              >const TIMER_STATE = &#123;
  IDLE: &quot;idle&quot;,
  RUNNING: &quot;running&quot;, 
  PAUSED: &quot;paused&quot;
&#125;;

let currentState = TIMER_STATE.IDLE;</code
            ></pre>

          <div class="space"></div>
          <h6 class="primary-text">Swiftï¼ˆEnumã‚’ä½¿ç”¨ï¼‰</h6>
          <pre class="primary-container round padding"><code class=""
              >enum TimerState &#123;
    case idle
    case running
    case paused
&#125;

var currentState = TimerState.idle</code
            ></pre>
        </div>
      </article>
    </div>

    <div class="s12 l6">
      <article class="tertiary-container round padding">
        <h5 class="">
          <i>lightbulb</i>
          Enumã®ãƒ¡ãƒªãƒƒãƒˆ
        </h5>
        <div class="space"></div>
        <ul class="">
          <li>
            <strong>å‹å®‰å…¨æ€§:</strong> é–“é•ã£ãŸå€¤ã‚’ä»£å…¥ã™ã‚‹ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
          </li>
          <li><strong>è£œå®Œæ©Ÿèƒ½:</strong> XcodeãŒè‡ªå‹•çš„ã«é¸æŠè‚¢ã‚’è¡¨ç¤º</li>
          <li><strong>switchæ–‡:</strong> å…¨ã‚±ãƒ¼ã‚¹ã‚’ç¶²ç¾…ã—ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯</li>
          <li><strong>èª­ã¿ã‚„ã™ã•:</strong> ã‚³ãƒ¼ãƒ‰ã®æ„å›³ãŒæ˜ç¢º</li>
        </ul>
      </article>
    </div>
  </div>
</section>

<div class="space"></div>

<!-- å®Ÿè£…æ‰‹é † -->
<section>
  <h3>ğŸ“ å®Ÿè£…æ‰‹é †</h3>

  <div class="space"></div>

  <div class="grid">
    <div class="s12">
      <article class="card round">
        <div class="padding">
          <h5>
            <i class="primary-text">edit</i>
            ã‚¹ãƒ†ãƒƒãƒ— 2-1: ContentView.swiftã‚’ç·¨é›†
          </h5>
          <div class="space"></div>
          <ol class="medium-text">
            <li>Xcodeã§<strong>ContentView.swift</strong>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¾ã™</li>
            <li>
              ãƒ•ã‚¡ã‚¤ãƒ«ã®å…ˆé ­ï¼ˆimport SwiftUIã®ä¸‹ï¼‰ã«TimerStateã‚’è¿½åŠ ã—ã¾ã™
            </li>
            <li>ContentView structã‚’æ›´æ–°ã—ã¾ã™</li>
          </ol>

          <div class="space"></div>
          <h6>è¿½åŠ ã™ã‚‹ã‚³ãƒ¼ãƒ‰:</h6>
          <CodeBlock code={fullSwiftCode} />
        </div>
      </article>
    </div>
  </div>
</section>

<div class="space"></div>

<!-- ã‚³ãƒ¼ãƒ‰è§£èª¬ -->
<section>
  <h3>ğŸ’¡ ã‚³ãƒ¼ãƒ‰è§£èª¬</h3>

  <div class="space"></div>

  <div class="grid">
    <div class="s12 m6">
      <article class="card round">
        <div class="padding">
          <h6>
            <i class="primary-text">category</i>
            Enumå®šç¾©
          </h6>
          <CodeBlock
            code={`enum TimerState {
    case idle      // å¾…æ©Ÿä¸­
    case running   // å®Ÿè¡Œä¸­
    case paused    // ä¸€æ™‚åœæ­¢ä¸­
}`}
          />
          <p class="small-text">
            ã‚¿ã‚¤ãƒãƒ¼ã®3ã¤ã®çŠ¶æ…‹ã‚’å®šç¾©ã€‚caseã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§å„çŠ¶æ…‹ã‚’å®£è¨€ã—ã¾ã™ã€‚
          </p>
        </div>
      </article>
    </div>

    <div class="s12 m6">
      <article class="card round">
        <div class="padding">
          <h6>
            <i class="secondary-text">alt_route</i>
            @Stateå¤‰æ•°
          </h6>
          <CodeBlock code={`@State var timerState: TimerState = .idle`} />
          <p class="small-text">
            @Stateã§çŠ¶æ…‹ã‚’ç®¡ç†ã€‚åˆæœŸå€¤ã¯.idleï¼ˆå¾…æ©Ÿä¸­ï¼‰ã«è¨­å®šã€‚
          </p>
        </div>
      </article>
    </div>

    <div class="s12 m6">
      <article class="card round">
        <div class="padding">
          <h6>
            <i class="tertiary-text">code</i>
            switchæ–‡
          </h6>
          <CodeBlock
            code={`switch timerState {
case .idle:
    return "å¾…æ©Ÿä¸­"
case .running:
    return "å®Ÿè¡Œä¸­"
case .paused:
    return "ä¸€æ™‚åœæ­¢ä¸­"
}`}
          />
          <p class="small-text">
            Enumã®å…¨ã‚±ãƒ¼ã‚¹ã‚’ç¶²ç¾…ã™ã‚‹switchæ–‡ã€‚å‹å®‰å…¨ã§æ¼ã‚ŒãŒã‚ã‚Šã¾ã›ã‚“ã€‚
          </p>
        </div>
      </article>
    </div>

    <div class="s12 m6">
      <article class="card round">
        <div class="padding">
          <h6>
            <i class="inverse-text">touch_app</i>
            çŠ¶æ…‹å¤‰æ›´
          </h6>
          <CodeBlock
            code={`func changeTimerState() {
    switch timerState {
    case .idle:
        timerState = .running
    case .running:
        timerState = .paused
    case .paused:
        timerState = .idle
    }
}`}
          />
          <p class="small-text">ç¾åœ¨ã®çŠ¶æ…‹ã«å¿œã˜ã¦æ¬¡ã®çŠ¶æ…‹ã«é·ç§»ã™ã‚‹é–¢æ•°ã€‚</p>
        </div>
      </article>
    </div>
  </div>
</section>

<div class="space"></div>

<!-- å‹•ä½œç¢ºèª -->
<section class="primary-container round padding">
  <div class="center-align">
    <h4 class="">ğŸ§ª å‹•ä½œç¢ºèª</h4>
    <p class="">ä»¥ä¸‹ã®å‹•ä½œã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†</p>
    <div class="space"></div>
  </div>

  <div class="grid">
    <div class="s12 m6">
      <div class="row">
        <div class="min">
          <i class="medium">play_arrow</i>
        </div>
        <div class="max">
          <h6 class="">1. ã‚¢ãƒ—ãƒªã‚’å®Ÿè¡Œ</h6>
          <p class="">
            ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã€ã€Œå¾…æ©Ÿä¸­ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
          </p>
        </div>
      </div>
    </div>

    <div class="s12 m6">
      <div class="row">
        <div class="min">
          <i class="medium">touch_app</i>
        </div>
        <div class="max">
          <h6 class="">2. ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—</h6>
          <p class="">ã€ŒçŠ¶æ…‹ã‚’å¤‰æ›´ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã—ã¦çŠ¶æ…‹ãŒå¤‰ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª</p>
        </div>
      </div>
    </div>

    <div class="s12 m6">
      <div class="row">
        <div class="min">
          <i class="medium">palette</i>
        </div>
        <div class="max">
          <h6 class="">3. è‰²ã®å¤‰åŒ–</h6>
          <p class="">
            çŠ¶æ…‹ã«å¿œã˜ã¦ãƒ†ã‚­ã‚¹ãƒˆã®è‰²ãŒå¤‰ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆã‚°ãƒ¬ãƒ¼â†’ç·‘â†’ã‚ªãƒ¬ãƒ³ã‚¸ï¼‰
          </p>
        </div>
      </div>
    </div>

    <div class="s12 m6">
      <div class="row">
        <div class="min">
          <i class="medium">refresh</i>
        </div>
        <div class="max">
          <h6 class="">4. å¾ªç’°ç¢ºèª</h6>
          <p class="">
            å¾…æ©Ÿä¸­â†’å®Ÿè¡Œä¸­â†’ä¸€æ™‚åœæ­¢ä¸­â†’å¾…æ©Ÿä¸­ã®é †ã§çŠ¶æ…‹ãŒå¾ªç’°ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="space"></div>

<!-- é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ -->
<section class="secondary-container round padding">
  <div class="center-align">
    <h4 class="">ğŸ¯ é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ</h4>
    <div class="space"></div>
  </div>

  <div class="grid">
    <div class="s12 m6">
      <div class="row">
        <div class="min">
          <i class="medium">verified</i>
        </div>
        <div class="max">
          <h6 class="">å‹å®‰å…¨æ€§</h6>
          <p class="">
            Enumã‚’ä½¿ã†ã“ã¨ã§ã€å­˜åœ¨ã—ãªã„çŠ¶æ…‹ã‚’èª¤ã£ã¦ä»£å…¥ã™ã‚‹ã“ã¨ã‚’é˜²ã’ã¾ã™ã€‚
          </p>
        </div>
      </div>
    </div>

    <div class="s12 m6">
      <div class="row">
        <div class="min">
          <i class="medium">rule</i>
        </div>
        <div class="max">
          <h6 class="">ç¶²ç¾…æ€§ãƒã‚§ãƒƒã‚¯</h6>
          <p class="">
            switchæ–‡ã§å…¨ã¦ã®ã‚±ãƒ¼ã‚¹ã‚’å‡¦ç†ã—ãªã„ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚
          </p>
        </div>
      </div>
    </div>

    <div class="s12 m6">
      <div class="row">
        <div class="min">
          <i class="medium">code</i>
        </div>
        <div class="max">
          <h6 class="">å¯èª­æ€§</h6>
          <p class="">
            ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã ã¨ãã«ã€ã©ã®ã‚ˆã†ãªçŠ¶æ…‹ãŒã‚ã‚‹ã‹ãŒä¸€ç›®ã§ã‚ã‹ã‚Šã¾ã™ã€‚
          </p>
        </div>
      </div>
    </div>

    <div class="s12 m6">
      <div class="row">
        <div class="min">
          <i class="medium">auto_awesome</i>
        </div>
        <div class="max">
          <h6 class="">Xcodeã®æ”¯æ´</h6>
          <p class="">
            è‡ªå‹•è£œå®Œã‚„ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ãŒEnumã‚’é©åˆ‡ã«ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="space"></div>

<!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
<section>
  <div class="row">
    <div class="max">
      {#if navigation.prev}
        <a href={navigation.prev.href} class="button transparent primary-text">
          <i>arrow_back</i>
          <span>{navigation.prev.title}</span>
        </a>
      {/if}
    </div>
    <div class="min">
      {#if navigation.next}
        <a href={navigation.next.href} class="button primary">
          <span>{navigation.next.title}</span>
          <i>arrow_forward</i>
        </a>
      {/if}
    </div>
  </div>
</section>

<style>
  .hero-section {
    padding: 3rem 0;
    background: linear-gradient(
      135deg,
      var(--primary-container) 0%,
      var(--secondary-container) 100%
    );
    border-radius: 1rem;
    margin-bottom: 2rem;
  }

  .large-text {
    font-size: 1.2rem;
    line-height: 1.6;
  }

  .medium-text {
    font-size: 1.1rem;
    line-height: 1.5;
  }

  .small-text {
    font-size: 0.9rem;
    line-height: 1.4;
  }

  .card {
    transition:
      transform 0.2s ease,
      box-shadow 0.2s ease;
    margin-bottom: 1rem;
  }

  pre {
    font-family: "Consolas", "Monaco", "Courier New", monospace;
    font-size: 0.85rem;
    line-height: 1.4;
    overflow-x: auto;
    margin: 0.5rem 0;
  }

  code {
    color: inherit;
    white-space: pre-wrap;
  }

  ol,
  ul {
    margin: 0.5rem 0;
    padding-left: 1.5rem;
  }
</style>
